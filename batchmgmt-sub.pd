#N canvas 964 85 954 852 10;
#X msg 497 45 memread 0;
#X obj 497 135 route 0;
#X text 442 166 do nothing;
#X text 441 152 edit mode;
#X msg 563 194 memset 0 1;
#X text 574 164 do handshake;
#X obj 536 165 t b b;
#X obj 536 247 raisestop;
#X obj 497 280 sigcont;
#X text 332 307 on CONT read from shmem ID;
#X msg 454 401 memread 0;
#X obj 387 458 raisestop;
#X msg 454 528 memset 0 \$1;
#X obj 454 481 t f f;
#X obj 497 17 loadbang;
#X obj 454 505 + 2000;
#X msg 770 342 allocate \$1 1;
#X msg 560 395 memread 0;
#X msg 770 639 allocate \$1 1024;
#X obj 694 616 f 0;
#X obj 734 617 + 1;
#X obj 694 590 until;
#X obj 560 522 route 0;
#X obj 560 548 raisestop;
#X obj 770 396 + 1000;
#X text 781 416 shmemID of full message;
#X text 627 504 message length;
#X obj 560 365 t b f f;
#X obj 415 373 t b b b;
#X msg 434 430 memset 0 0;
#X msg 594 464 memset 0 0;
#X msg 694 639 memread \$1;
#X obj 678 747 list store;
#X msg 694 701 append \$1;
#X obj 678 778 fudiparse;
#X obj 631 523 t b b b b f;
#X msg 655 586 0;
#X msg 626 704 bang;
#X obj 36 297 inlet;
#X obj 678 814 outlet;
#X obj 36 325 fudiformat;
#X obj 497 73 shmem 10999 1;
#X obj 563 220 shmem 10998 1;
#X obj 497 307 f 10997;
#X obj 497 330 route 10997;
#X obj 454 458 shmem 10997 1;
#X obj 454 551 shmem 10996 1;
#X text 334 575 return callback shmem ID on 10996;
#X obj 560 427 shmem 10995 1;
#X obj 694 678 shmem 10995 1;
#X obj 208 492 t f f;
#X obj 208 589 + 1000;
#X obj 235 559 shmem 10995 1;
#X obj 208 657 shmem 10995 1;
#X msg 208 612 allocate \$1 1024;
#X msg 235 530 allocate \$1 1;
#X obj 36 541 list trim;
#X obj 93 399 list length;
#X obj 36 518 list prepend memset 0;
#X msg 93 422 memset 0 \$1;
#X text 23 65 batchmgmt-top and batchmgmt-sub use the following shmemID's
;
#X text 23 84 10999 - set to 0 (default) when editing. If non-zero
\, batchmgmt-sub will set value 1 to shmemID 10998 and stop.;
#X text 23 112 10998 - batchmgmt-top reads from 10998 to find if a
batchmgmt-sub instance has started (value 1).;
#X text 23 232 10996 - batchmgmt-top reads the shmemID y and uses (y
\, y+1000) to receive messages from batchmgmt-sub.;
#X text 22 260 10995 - placeholder for shmem initial config;
#X obj 827 815 outlet;
#X obj 800 711 sigtstp;
#X obj 800 776 t b b;
#X obj 764 815 raisestop;
#X obj 800 734 delay 0;
#X text 845 753 TSTP handler;
#X text 23 140 10997 - batchmgmt-top will assign a new shmemID x to
10997 and send SIGCONT to the pd instance with batchmgmt-sub. batchmgmt-sub
will read on 10997 the first time it receives a CONT and will assign
(x \, x+1000) for reading from batchmgmt-top. It will assign (x+2000
\, x+3000) for writing messages back to batchmgmt-top. It will set
x+2000 to shmemID 10996 and stop.;
#X text 82 306 send lists to toplevel process which;
#X text 104 324 polls the shmemID's for new data;
#X text 47 696 note: max fudi list length set to 1024 in the shmem
allocate messages;
#X obj 770 520 pack f f;
#X obj 770 550 route 0;
#X obj 770 489 t b f;
#X obj 737 520 f 0;
#X obj 770 285 pack f f;
#X obj 770 315 route 0;
#X obj 737 259 t b f;
#X obj 737 285 f 0;
#X text 823 532 pass float once only;
#X msg 737 550 1;
#X msg 736 316 1;
#X text 783 259 pass float once only;
#X obj 36 358 t l l;
#X text 22 15 batchmgmt-sub is an abstraction to communicate with a
toplevel process within batch mode using FUDI over shmem and signal
handlers sigtstp \, sigcont \, and raisestop.;
#X connect 0 0 41 0;
#X connect 1 1 6 0;
#X connect 4 0 42 0;
#X connect 6 0 7 0;
#X connect 6 1 4 0;
#X connect 8 0 43 0;
#X connect 10 0 45 0;
#X connect 12 0 46 0;
#X connect 13 0 15 0;
#X connect 13 1 43 1;
#X connect 14 0 0 0;
#X connect 15 0 12 0;
#X connect 15 0 50 0;
#X connect 16 0 48 0;
#X connect 17 0 48 0;
#X connect 18 0 49 0;
#X connect 19 0 20 0;
#X connect 19 0 31 0;
#X connect 20 0 19 1;
#X connect 21 0 19 0;
#X connect 22 0 23 0;
#X connect 22 1 35 0;
#X connect 24 0 77 0;
#X connect 27 0 17 0;
#X connect 27 1 81 0;
#X connect 27 2 24 0;
#X connect 28 0 11 0;
#X connect 28 1 29 0;
#X connect 28 2 10 0;
#X connect 29 0 45 0;
#X connect 30 0 48 0;
#X connect 31 0 49 0;
#X connect 32 0 34 0;
#X connect 33 0 32 0;
#X connect 34 0 39 0;
#X connect 35 0 30 0;
#X connect 35 1 37 0;
#X connect 35 2 36 0;
#X connect 35 3 32 0;
#X connect 35 4 21 0;
#X connect 36 0 19 1;
#X connect 37 0 32 1;
#X connect 38 0 40 0;
#X connect 40 0 87 0;
#X connect 41 0 1 0;
#X connect 43 0 44 0;
#X connect 44 0 28 0;
#X connect 44 1 27 0;
#X connect 45 0 13 0;
#X connect 48 0 22 0;
#X connect 49 0 33 0;
#X connect 50 0 51 0;
#X connect 50 1 55 0;
#X connect 51 0 54 0;
#X connect 54 0 53 0;
#X connect 55 0 52 0;
#X connect 56 0 53 0;
#X connect 57 0 59 0;
#X connect 58 0 56 0;
#X connect 59 0 52 0;
#X connect 66 0 69 0;
#X connect 67 0 68 0;
#X connect 67 1 65 0;
#X connect 69 0 67 0;
#X connect 75 0 76 0;
#X connect 76 0 18 0;
#X connect 76 0 84 0;
#X connect 77 0 78 0;
#X connect 77 1 75 1;
#X connect 78 0 75 0;
#X connect 79 0 80 0;
#X connect 80 0 16 0;
#X connect 80 0 85 0;
#X connect 81 0 82 0;
#X connect 81 1 79 1;
#X connect 82 0 79 0;
#X connect 84 0 78 1;
#X connect 85 0 82 1;
#X connect 87 0 58 0;
#X connect 87 1 57 0;
